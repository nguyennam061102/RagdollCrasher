!function(){var r,n,d,i,o,t,s,a,l,c,u,h,m,g,f,w,p,v,E,R,y,C,O,N,b,S,e=!!window.GADSME_MRAID,I=(!!window.GADSME_LOG&&(window.GadsmeNativeBridgeAndroid?(console={log:function(e){window.GadsmeNativeBridgeAndroid&&window.GadsmeNativeBridgeAndroid.consoleLog(""+e)}}).debug=console.info=console.warn=console.error=console.log:window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.GadsmeNativeBridge&&((console={log:function(e){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.GadsmeNativeBridge&&window.webkit.messageHandlers.GadsmeNativeBridge.postMessage({log:e})}}).debug=console.info=console.warn=console.error=console.log)),window.open=function(){var e=arguments[0];e&&I.executeNativeCall(["open","url",e])},window.gadsmebridge={});function P(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}I.executeNativeCall=function(e){var t=(e=[].concat(e)).shift();this.canExecuteNativeCall?window.GadsmeNativeBridgeAndroid?window.GadsmeNativeBridgeAndroid.runCommand(t,JSON.stringify(e)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.GadsmeNativeBridge&&window.webkit.messageHandlers.GadsmeNativeBridge.postMessage({command:t,args:e}):(console.log("rejecting "+t+" because bridge is not ready"),I.notifyErrorEvent&&I.notifyErrorEvent("bridge is not ready",t))},window.self!==window.top?I.canExecuteNativeCall=!0:void 0===window.mraid&&(r={},e&&(window.mraid=r,window.MRAID_ENV={version:"2.0",sdk:"Gadsme",sdkVersion:"1.0.0"}),I.canExecuteNativeCall=!1,I.lastSizeChangeProperties=null,I.boot=function(){window.GadsmeNativeBridgeAndroid?window.GadsmeNativeBridgeAndroid.boot():window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.GadsmeNativeBridge&&window.webkit.messageHandlers.GadsmeNativeBridge.postMessage("boot")},I.setCurrentPosition=function(e,t,n,i){console.log("bridge.setCurrentPosition("+e+", "+t+", "+n+", "+i+")"),c={x:e,y:t,width:n,height:i},R(d.INFO,"Set current position to "+C(c)),e=n,t=i,a&&e==a.width&&t==a.height||(a={width:e,height:t},R(d.SIZECHANGE,e,t))},I.setDefaultPosition=function(e,t,n,i){u={x:e,y:t,width:n,height:i},R(d.INFO,"Set default position to "+C(u))},I.setMaxSize=function(e,t){l={width:e,height:t},i.width=e,i.height=t,R(d.INFO,"Set max size to "+C(l))},I.setPlacementType=function(e){p=e,R(d.INFO,"Set placement type to "+C(p))},I.setScreenSize=function(e,t){console.log("bridge.setScreenSize("+e+", "+t+")"),h={width:e,height:t},R(d.INFO,"Set screen size to "+C(h))},I.setState=function(e){console.log("bridge.setState("+e+")"),f!=e&&(f=e,R(d.INFO,"Set state to "+C(f)),R(d.STATECHANGE,f))},I.setIsViewable=function(e){console.log("bridge.setIsViewable("+e+")"),w!=e&&(w=e,R(d.INFO,"Set isViewable to "+C(w)),R(d.VIEWABLECHANGE,w))},I.setHostSDKVersion=function(e){e=e.split(".").map(function(e){return parseInt(e,10)}).filter(function(e){return 0<=e});3<=e.length&&(v.major=parseInt(e[0],10),v.minor=parseInt(e[1],10),v.patch=parseInt(e[2],10),R(d.INFO,"Set hostSDKVersion to "+C(v)))},I.setSupports=function(e,t,n,i,r){s={sms:e,tel:t,calendar:n,storePicture:i,inlineVideo:r}},I.notifyReadyEvent=function(){this.canExecuteNativeCall=!0,R(d.READY)},I.notifyErrorEvent=function(e,t){R(d.ERROR,e,t)},I.notifyImpressionEvent=function(e){window.GadsmeNativeBridgeAndroid?window.GadsmeNativeBridgeAndroid.impression(JSON.stringify(e)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.GadsmeNativeBridge&&window.webkit.messageHandlers.GadsmeNativeBridge.postMessage({impression:JSON.stringify(e)})},I.notifyStateChangeEvent=function(){f===n.LOADING&&R(d.INFO,"Native SDK initialized."),R(d.INFO,"Set state to "+C(f)),R(d.STATECHANGE,f)},I.notifyViewableChangeEvent=function(){R(d.INFO,"Set isViewable to "+C(w)),R(d.VIEWABLECHANGE,w)},r.VERSION="2.0",n=r.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",HIDDEN:"hidden",RESIZED:"resized"},d=r.EVENTS={ERROR:"error",INFO:"info",READY:"ready",STATECHANGE:"stateChange",VIEWABLECHANGE:"viewableChange",SIZECHANGE:"sizeChange"},e=r.PLACEMENT_TYPES={UNKNOWN:"unknown",INLINE:"inline",INTERSTITIAL:"interstitial"},s={sms:!(t={allowOrientationChange:!0,forceOrientation:"none"}),tel:!(o={width:!(i={width:!1,height:!1,useCustomClose:!1,isModal:!0}),height:!1,offsetX:!1,offsetY:!1,customClosePosition:"top-right",allowOffscreen:!0}),calendar:!1,storePicture:!1,inlineVideo:!1},a=void 0,l={},c={x:0,y:0,width:0,height:0},u={x:0,y:0,width:0,height:0},h={width:0,height:0},m={},g={},f=n.LOADING,w=!1,p=e.INLINE,v={major:0,minor:0,patch:0},E=function(n){this.event=n,this.count=0;var i={};this.add=function(e){var t=String(e);i[t]||(i[t]=e,this.count++)},this.remove=function(e){e=String(e);return!!i[e]&&(i[e]=null,delete i[e],this.count--,!0)},this.removeAll=function(){for(var e in i)i.hasOwnProperty(e)&&this.remove(i[e])},this.broadcast=function(e){for(var t in i)i.hasOwnProperty(t)&&i[t].apply(r,e)},this.toString=function(){var e,t=[n,":"];for(e in i)i.hasOwnProperty(e)&&t.push("|",e,"|");return t.join("")}},R=function(){for(var e=new Array(arguments.length),t=arguments.length,n=0;n<t;n++)e[n]=arguments[n];var i=e.shift();m[i]&&m[i].broadcast(e)},y=function(e,t){for(var n in t)if(t[n]===e)return!0;return!1},C=function(e){if("object"!=typeof e)return String(e);var t=[];if(e.push){for(var n in e)t.push(e[n]);return"["+t.join(",")+"]"}for(n in e)t.push("'"+n+"': "+e[n]);return"{"+t.join(",")+"}"},O=function(e,t,n,i){if(!i){if(null===e)return R(d.ERROR,"Required object not provided.",n),!1;for(var r in t)if(t.hasOwnProperty(r)&&void 0===e[r])return R(d.ERROR,"Object is missing required property: "+r,n),!1}for(var o in e){var s=t[o],a=e[o];if(s&&!s(a))return R(d.ERROR,"Value of property "+o+" is invalid: "+a,n),!1}return!0},N={useCustomClose:function(e){return"boolean"==typeof e}},r.addEventListener=function(e,t){console.log("mraid.addEventListener("+e+")"),e&&t?y(e,d)?(m[e]||(m[e]=new E(e)),m[e].add(t)):R(d.ERROR,"Unknown MRAID event: "+e,"addEventListener"):R(d.ERROR,"Both event and listener are required.","addEventListener")},r.close=function(){console.log("mraid.close()"),f===n.HIDDEN?R(d.ERROR,"Ad cannot be closed when it is already hidden.","close"):I.executeNativeCall(["close"])},r.expand=function(e){var t;console.log("mraid.expand()"),this.getState()!==n.DEFAULT&&this.getState()!==n.RESIZED?R(d.ERROR,"Ad can only be expanded from the default or resized state.","expand"):(t=["expand","shouldUseCustomClose",i.useCustomClose],e&&(t=t.concat(["url",e])),I.executeNativeCall(t),R(d.ERROR,"Cannot expand in 3D environment","expand"))},r.getExpandProperties=function(){return console.log("mraid.getExpandProperties()"),{width:i.width,height:i.height,useCustomClose:i.useCustomClose,isModal:i.isModal}},r.getCurrentPosition=function(){return console.log("mraid.getCurrentPosition() -> { x: "+c.x+", y: "+c.y+", width: "+c.width+", height: "+c.height+" }"),{x:c.x,y:c.y,width:c.width,height:c.height}},r.getDefaultPosition=function(){return console.log("mraid.getDefaultPosition() -> { x: "+u.x+", y: "+u.y+", width: "+u.width+", height: "+u.height+" }"),{x:u.x,y:u.y,width:u.width,height:u.height}},r.getMaxSize=function(){return console.log("mraid.getMaxSize()"),{width:l.width,height:l.height}},r.getPlacementType=function(){return console.log("mraid.getPlacementType()"),p},r.getScreenSize=function(){return console.log("mraid.getScreenSize() -> { width: "+h.width+", height: "+h.height+" }"),{width:h.width,height:h.height}},r.getState=function(){return didGetState=!0,console.log("mraid.getState() -> "+f),f},r.isViewable=function(){return console.log("mraid.isViewable() -> "+w),w},r.getVersion=function(){return console.log("mraid.getVersion() -> "+r.VERSION),r.VERSION},r.open=function(e){console.log("mraid.open()"),e?I.executeNativeCall(["open","url",e]):R(d.ERROR,"URL is required.","open")},r.removeEventListener=function(e,t){if(console.log("mraid.removeEventListener("+e+")"),e){if(t){var n=!1;if(!(n=m[e]?m[e].remove(t):n))return void R(d.ERROR,"Listener not currently registered for event.","removeEventListener")}else!t&&m[e]&&m[e].removeAll();m[e]&&0===m[e].count&&(m[e]=null,delete m[e])}else R(d.ERROR,"Event is required.","removeEventListener")},r.setExpandProperties=function(e){console.log("mraid.setExpandProperties()"),O(e,N,"setExpandProperties",!0)&&e.hasOwnProperty("useCustomClose")&&(i.useCustomClose=e.useCustomClose)},r.useCustomClose=function(e){console.log("mraid.useCustomClose()"),i.useCustomClose=e,I.executeNativeCall(["usecustomclose","shouldUseCustomClose",e])},r.createCalendarEvent=function(e){console.log("mraid.createCalendarEvent()"),S.initialize(e),S.parse()?I.executeNativeCall(S.arguments):R(d.ERROR,S.errors[0],"createCalendarEvent")},r.supports=function(e){return console.log("mraid.supports("+e+") -> "+s[e]),s[e]},r.playVideo=function(e){console.log("mraid.playVideo()"),r.isViewable()?e?(I.executeNativeCall(["playVideo","uri",e]),R(d.ERROR,"Cannot play video in 3D environment","playVideo")):R(d.ERROR,"playVideo must be called with a valid URI","playVideo"):R(d.ERROR,"playVideo cannot be called until the ad is viewable","playVideo")},r.storePicture=function(e){console.log("mraid.storePicture()"),r.isViewable()?e?(I.executeNativeCall(["storePicture","uri",e]),R(d.ERROR,"Cannot store picture in 3D environment","storePicture")):R(d.ERROR,"storePicture must be called with a valid URI","storePicture"):R(d.ERROR,"storePicture cannot be called until the ad is viewable","storePicture")},b={width:function(e){return!isNaN(e)&&0<e},height:function(e){return!isNaN(e)&&0<e},offsetX:function(e){return!isNaN(e)},offsetY:function(e){return!isNaN(e)},customClosePosition:function(e){return"string"==typeof e&&-1<["top-right","bottom-right","top-left","bottom-left","center","top-center","bottom-center"].indexOf(e)},allowOffscreen:function(e){return"boolean"==typeof e}},r.setOrientationProperties=function(e){console.log("mraid.setOrientationProperties()"),e.hasOwnProperty("allowOrientationChange")&&(t.allowOrientationChange=e.allowOrientationChange),e.hasOwnProperty("forceOrientation")&&(t.forceOrientation=e.forceOrientation),I.executeNativeCall(["setOrientationProperties","allowOrientationChange",t.allowOrientationChange,"forceOrientation",t.forceOrientation])},r.getOrientationProperties=function(){return console.log("mraid.getOrientationProperties()"),{allowOrientationChange:t.allowOrientationChange,forceOrientation:t.forceOrientation}},r.resize=function(){console.log("mraid.resize()"),this.getState()!==n.DEFAULT&&this.getState()!==n.RESIZED?R(d.ERROR,"Ad can only be resized from the default or resized state.","resize"):o.width&&o.height?(I.executeNativeCall(["resize","width",o.width,"height",o.height,"offsetX",o.offsetX||0,"offsetY",o.offsetY||0,"customClosePosition",o.customClosePosition,"allowOffscreen",!!o.allowOffscreen]),R(d.ERROR,"Cannot resize in 3D environment","resize")):R(d.ERROR,"Must set resize properties before calling resize()","resize")},r.getResizeProperties=function(){return console.log("mraid.getResizeProperties()"),{width:o.width,height:o.height,offsetX:o.offsetX,offsetY:o.offsetY,customClosePosition:o.customClosePosition,allowOffscreen:o.allowOffscreen}},r.setResizeProperties=function(e){if(console.log("mraid.setResizeProperties()"),O(e,b,"setResizeProperties",!0))for(var t=["width","height","offsetX","offsetY","customClosePosition","allowOffscreen"],n=t.length,i=0;i<n;i++){var r=t[i];e.hasOwnProperty(r)&&(o[r]=e[r])}},r.getHostSDKVersion=function(){return console.log("mraid.getHostSDKVersion()"),{major:v.major,minor:v.minor,patch:v.patch}},S={initialize:function(e){this.parameters=e,this.errors=[],this.arguments=["createCalendarEvent"]},parse:function(){this.parameters?(this.parseDescription(),this.parseLocation(),this.parseSummary(),this.parseStartAndEndDates(),this.parseReminder(),this.parseRecurrence(),this.parseTransparency()):this.errors.push("The object passed to createCalendarEvent cannot be null.");var e=this.errors.length;return e&&(this.arguments.length=0),0===e},parseDescription:function(){this._processStringValue("description")},parseLocation:function(){this._processStringValue("location")},parseSummary:function(){this._processStringValue("summary")},parseStartAndEndDates:function(){this._processDateValue("start"),this._processDateValue("end")},parseReminder:function(){var e=this._getParameter("reminder");e&&(e<0?(this.arguments.push("relativeReminder"),this.arguments.push(parseInt(e)/1e3)):(this.arguments.push("absoluteReminder"),this.arguments.push(e)))},parseRecurrence:function(){var e=this._getParameter("recurrence");e&&(this.parseRecurrenceInterval(e),this.parseRecurrenceFrequency(e),this.parseRecurrenceEndDate(e),this.parseRecurrenceArrayValue(e,"daysInWeek"),this.parseRecurrenceArrayValue(e,"daysInMonth"),this.parseRecurrenceArrayValue(e,"daysInYear"),this.parseRecurrenceArrayValue(e,"monthsInYear"))},parseTransparency:function(){var e;this.parameters.hasOwnProperty("transparency")&&(e=this.parameters.transparency,y(e,["opaque","transparent"])?(this.arguments.push("transparency"),this.arguments.push(e)):this.errors.push("transparency must be opaque or transparent"))},parseRecurrenceArrayValue:function(e,t){e.hasOwnProperty(t)&&((e=e[t])&&e instanceof Array?(e=e.join(","),this.arguments.push(t),this.arguments.push(e)):this.errors.push(t+" must be an array."))},parseRecurrenceInterval:function(e){e.hasOwnProperty("interval")?(e=e.interval)?(this.arguments.push("interval"),this.arguments.push(e)):this.errors.push("Recurrence interval cannot be null."):(this.arguments.push("interval"),this.arguments.push(1))},parseRecurrenceFrequency:function(e){e.hasOwnProperty("frequency")&&(e=e.frequency,y(e,["daily","weekly","monthly","yearly"])?(this.arguments.push("frequency"),this.arguments.push(e)):this.errors.push('Recurrence frequency must be one of: "daily", "weekly", "monthly", "yearly".'))},parseRecurrenceEndDate:function(e){e=e.expires;e&&(this.arguments.push("expires"),this.arguments.push(e))},_getParameter:function(e){return this.parameters.hasOwnProperty(e)?this.parameters[e]:null},_processStringValue:function(e){var t;this.parameters.hasOwnProperty(e)&&(t=this.parameters[e],this.arguments.push(e),this.arguments.push(t))},_processDateValue:function(e){var t;this.parameters.hasOwnProperty(e)&&(t=this._getParameter(e),this.arguments.push(e),this.arguments.push(t))}},I.click=function(e,t){var n=document.elementFromPoint(e,t);n&&(n instanceof HTMLIFrameElement?I.sendIFrameElementCommand(n,"click",[e-n.offsetLeft,t-n.offsetTop]):n.click())},I.sendIFrameElementCommand=function(e,t,n){try{e.contentWindow?e.contentWindow.postMessage({gadsme:{command:t,args:n}},"*"):I.sendIFrameSrcCommand(e.src.split("#")[0],t,n)}catch(e){console.error("failed to send iframe element command "+t+": "+e)}},I.sendIFrameSrcCommand=function(e,t,n){for(frameId in g)if(g[frameId].location==e){I.sendFrameCommand(frameId,t,n);break}},I.sendFrameCommand=function(e,t,n){g[e]&&g[e].window&&g[e].window.postMessage({gadsme:{command:t,args:n}},"*")},window.addEventListener("message",function(e){if(e&&"object"==typeof e.data&&e.data.gadsme){var t=e.data.gadsme;switch(t.command){case"plugFrame":var n=t.args[0],i=t.args[1];g[n]={frameId:n,location:i,window:e.source,origin:e.origin};break;case"iframeClick":var n=t.args[0],i=t.args[1],r=t.args[2];I.sendIFrameSrcCommand(n,"click",[i,r])}}}),I.boot()),window.self!==window.top&&(I.frameId=function(){return P()+P()+"-"+P()+"-"+P()+"-"+P()+"-"+P()+P()+P()}(),e=document.location.href.split("#")[0],window.GadsmeNativeBridgeAndroid?window.GadsmeNativeBridgeAndroid.plugFrame(document.location.href):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.GadsmeNativeBridge&&window.webkit.messageHandlers.GadsmeNativeBridge.postMessage({command:"plugFrame",args:[I.frameId,e]}),window.top.postMessage({gadsme:{command:"plugFrame",args:[I.frameId,e]}},"*"),window.addEventListener("message",function(e){var t,n;e&&"object"==typeof e.data&&e.data.gadsme&&"click"===(e=e.data.gadsme).command&&(t=e.args[0],e=e.args[1],t=t,e=e,n=document.elementFromPoint(t,e))&&(n instanceof HTMLIFrameElement?n.contentWindow?n.contentWindow.postMessage({gadsme:{command:"click",args:[t-n.offsetLeft,e-n.offsetTop]}},"*"):window.top.postMessage({gadsme:{command:"iframeClick",args:[n.src.split("#")[0],t-n.offsetLeft,e-n.offsetTop]}},"*"):n.click())}))}();